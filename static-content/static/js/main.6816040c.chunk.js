(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,l=a(0),r=a.n(l),o=a(11),c=a.n(o),s=(a(17),a(2)),i=a(3),u=a(6),m=a(4),p=a(7),d=a(5),h=a(8),E=null,g=function(e){E=e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E.setState(e)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";"string"===typeof e&&e.length?E.setState({message:e,messageType:t}):"string"!==typeof e?console.error("setErrorMessage only accepts strings.  A '".concat(typeof e,"' was provided")):console.error("Trying to call setErrorMessage with an empty string")},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault&&e.preventDefault(),E.setState({message:null,messageType:"success"})},k=function(e,t){var a=Object.assign({},E.state,{args:Object.assign({},E.state.args,Object(h.a)({},e,t))});E.setState(a)},b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=E.state[e]||{};E.setState(Object(h.a)({},e,Object.assign({},n,{isLoading:!0}))),fetch("http://localhost:8085/"+t,Object.assign({},{method:"GET"},a)).then((function(e){return e.json()})).then((function(t){Array.isArray(t)&&1===t.length&&(t=t[0]),E.setState(Object(h.a)({},e,t))})).catch((function(t){E.setState(Object(h.a)({},e,{error:t}))}))},O=function(){var e={view:"unknown",args:{}},t=window.location.pathname,a=!1;return[{r:/^\/$/,v:"home"},{r:/^\/image\/create$/,v:"image-create"},{r:/\/image\/(.*)/,v:"image",m:function(e){return{id:e[1]}}},{r:/\/images/,v:"images"},{r:/\/containers\/show\/(.*)/,v:"containers",m:function(e){return{type:e[1]}}},{r:/\/container\/run\/(.*)/,v:"container-run",m:function(e){return{imageId:e[1]}}},{r:/\/container\/(.*)/,v:"container",m:function(e){return{id:e[1]}}},{r:/\/volumes\/?$/,v:"volumes"},{r:/\/volume\/create$/,v:"volume-create"},{r:/\/volume\/(.*)/,v:"volume",m:function(e){return{id:e[1]}}}].forEach((function(n){if(!0!==a){var l=n.r.exec(t);l&&(n.v&&(e.view=n.v),e.args=n.m?n.m(l):{},a=!0)}})),e},N=function(e){return function(t){function a(e){var t;return Object(s.a)(this,a),(t=Object(u.a)(this,Object(m.a)(a).call(this,e))).apiId=[],t.repeating=[],t.timer=null,t.mounted=!1,t}return Object(d.a)(a,t),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.mounted=!0,this.repeating&&(this.timer=setInterval(this.timerCallback.bind(this),1500),this.timerCallback())}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.apiId){var a=[],n="success",l=e.message||null;if(this.apiId.forEach((function(e){var l=t.props[e];if(l)if(l.error)a.push(l.error),n="error";else if(l.results){var r="";l.command&&(r+="Successful Result\n",r+="Command:\n ".concat(l.command),r+="\n\n"),r+="Ouput:\n".concat(l.results),a.push(r)}})),a&&a.length){var r=a.join("\n\n");l!==r&&v(r,n)}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&(clearInterval(this.timer),this.timer=null),this.repeating.concat(this.apiId).forEach((function(e){var t,a=e;e&&e.id&&(a=e.id),t=a,E&&E.state.hasOwnProperty(t)&&(delete E.state[t],E.setState(E.state))}))}},{key:"timerCallback",value:function(e){this.mounted?this.repeating.forEach((function(e){b(e.id,e.endpoint,e.params)})):this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"render",value:function(){var t=this,a=function(e){t.apiId.indexOf(e)<0&&t.apiId.push(e)};return r.a.createElement(e,Object.assign({addRepeatingApi:function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0!==t.mounted){var l=t.repeating.find((function(t){return t.id===e}));l||t.repeating.push({id:e,endpoint:a,params:n,timer:null})}else console.warn("`addRepeatingApi` must be called before `withApiWatch` is mounted")},addApiWatchId:a,setApiWatchId:a},this.props))}}]),a}(r.a.Component)},C=a(1),w=a.n(C),j=N(function(e){function t(e){var a;Object(s.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=Object(p.a)(a);return k("socketOpen",!1),a.socket=new WebSocket("ws://localhost:8086"),a.socket.onopen=function(){k("socketOpen",!0)},a.socket.onclose=function(){k("socketOpen",!1)},a.socket.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return}if(t&&"volume-create-backup"===t.type){if(t&&(t.data||t.error)){var a=w.a.get(n.props,"args.output")||[],l=t.data||t.error;l.match(/^\(/)&&a.length&&a[a.length-1].match(/^\(/)?a[a-1]=l:a.push(l),k("output",a)}t&&!0===t.finished&&k("backupStarted",!1),setTimeout((function(){n.stdout&&(n.stdout.scrollTop=n.stdout.scrollHeight)}),100)}},a.stdout=null,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.addApiWatchId("volume-delete"),this.props.addRepeatingApi("volume-info","volume/"+this.getId())}},{key:"getId",value:function(){return this.props.args.id}},{key:"handleBackupClick",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.getId(),a=this.props.args.socketOpen;t&&a?(this.socket.send(JSON.stringify({type:"volume-create-backup",name:t})),k("backupStarted",!0)):a?t||v("Please enter a path first.","error"):v("Socket is not connected.  Please refresh the page.","error")}},{key:"handleDeleteClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),window.confirm("Are you sure you want to delete this image?")&&b("volume-delete","volume/"+this.getId(),{method:"DELETE"})}},{key:"parseValue",value:function(e){if(Array.isArray(e))return e.join(", ");switch(typeof e){case"string":case"number":return e;case"object":return this.objectToString(e);default:return e}}},{key:"objectToString",value:function(e){var t=this;return r.a.createElement("ul",null,Object.keys(e).map((function(a){return r.a.createElement("li",{key:"entry-".concat(a)},r.a.createElement("strong",null,a)," => ",t.parseValue(e[a]))})))}},{key:"render",value:function(){var e=this,t=w.a.get(this.props,"volume-info.results.basic"),a=w.a.get(this.props,"volume-info.results.meta"),n=w.a.get(this.props,"args.socketOpen")||!1,l=w.a.get(this.props,"args.output"),o=w.a.get(this.props,"args.backupStarted")||!1,c=this,s=[];return r.a.createElement("div",{className:"Volume"},r.a.createElement("h1",null,"Volume ",this.getId()),r.a.createElement("p",null,"This page container information about a specific Volume, and provides simple actions to manage the Volume."),r.a.createElement("p",null,r.a.createElement("span",{className:"toggler danger".concat(!0===n?" checked":"")},"Connection Open"),r.a.createElement("br",null),r.a.createElement("em",null,"This page uses WebSockets to stream the output of the build process to this page.  If the indicator above is red, there is no connection."),r.a.createElement("br",null),o?r.a.createElement("span",{className:"toggler danger".concat(!0===o?" checked":"")},"Backup Started"):null),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"void",className:"text-danger",onClick:this.handleDeleteClick.bind(this)},"Delete Volume")),o?null:r.a.createElement("li",null,r.a.createElement("a",{href:"void",onClick:this.handleBackupClick.bind(this)},"Create Backup"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,t?Object.keys(t).map((function(a,n){return s.push(a.toLowerCase()),r.a.createElement("tr",{key:"volume-basic-".concat(a,"-").concat(n)},r.a.createElement("td",null,a),r.a.createElement("td",null,e.parseValue(t[a])))})):null,a?Object.keys(a).map((function(t,n){return s.indexOf(t.toLowerCase())>=0?null:r.a.createElement("tr",{key:"volume-meta-".concat(t,"-").concat(n)},r.a.createElement("td",null,t),r.a.createElement("td",null,e.parseValue(a[t])))})):null)))),l?[r.a.createElement("p",{key:"blank"}),r.a.createElement("pre",{className:"console",key:"console",ref:function(e){c.stdout=e}},l.join(""))]:null)}}]),t}(r.a.Component)),I=function(e){return r.a.createElement("a",{href:e.to,onClick:function(t){t&&t.preventDefault&&t.preventDefault(),window.history.pushState({},e.title||"Page Change",e.to),"function"===typeof e.onClick&&e.onClick(),f(O())},className:e.className||""},e.children)},S=N(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.addRepeatingApi("volumes","volumes"),this.props.addApiWatchId("volume-create")}},{key:"handleNewVolume",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=window.prompt("Please enter a name for the Volume.");t&&b("volume-create","volume/create",{method:"post",body:JSON.stringify({name:t})})}},{key:"render",value:function(){var e=w.a.get(this.props,"volumes.output")||[];return r.a.createElement("div",{className:"Volumes"},r.a.createElement("h1",null,"Volumes"),r.a.createElement("p",null,"This page lists the available volumes."),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"void",onClick:this.handleNewVolume.bind(this)},"Create new Volume"))),e&&e.length?r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(e[0]).map((function(e,t){return r.a.createElement("th",{key:"col-".concat(e)},e)})))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:"vol-".concat(t)},Object.keys(e).map((function(t,a){var n=e[t];return"VOLUME NAME"===t&&(n=r.a.createElement(I,{to:"/volume/".concat(e[t])},e[t])),r.a.createElement("td",{key:"vol-key-".concat(t)},n)})))})))):null)}}]),t}(r.a.Component)),D=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){b("images","images")}},{key:"render",value:function(){var e=this.props.images||{};return r.a.createElement("div",{className:"Images"},r.a.createElement("h1",null,"Images"),r.a.createElement("p",null,"This page lists the available images"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(I,{to:"/image/create"},"Create new Image"))),e&&e.output?r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Image ID"),r.a.createElement("th",null,"Repository"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Created"))),r.a.createElement("tbody",null,e.output.map((function(e,t){return e["IMAGE ID"]?r.a.createElement("tr",{key:e["IMAGE ID"]},r.a.createElement("td",null,r.a.createElement(I,{to:"/image/".concat(e["IMAGE ID"])},e["IMAGE ID"])),r.a.createElement("td",null,e.REPOSITORY),r.a.createElement("td",null,e.SIZE),r.a.createElement("td",null,e.CREATED)):null})))):null)}}]),t}(r.a.Component),A=(a(10),N(function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getId",value:function(){return this.props.args.id}},{key:"componentDidMount",value:function(){this.props.addRepeatingApi("image-".concat(this.getId()),"image/inspect/".concat(this.getId())),this.props.addApiWatchId("image-".concat(this.getId())),this.props.addApiWatchId("run-img-command")}},{key:"toggleShowFullDetails",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=!0!==this.props.args.isShowFull;k("isShowFull",t)}},{key:"imageCommand",value:function(e){var t=this;return function(a){a.preventDefault();var n={method:"post"};"force-rm"===e&&(e="rm",n.body=JSON.stringify({options:["-f"]})),b("run-img-command","image/".concat(t.getId(),"/perform/").concat(e),n)}}},{key:"render",value:function(){var e=this.props["image-".concat(this.getId())]||{},t=w.a.get(this.props,"image-".concat(this.getId(),".isLoading"))||!1,a=this.props.args.isShowFull||!1;return Array.isArray(e)&&(e=e[0]),r.a.createElement("div",{className:"Image"},r.a.createElement("h1",null,"Image ",this.props.args.id),r.a.createElement("p",null,"This page show the details and available actions for an Image"),r.a.createElement("h2",null,"Details"),t&&!e.Size?r.a.createElement("p",null,"Please wait while the image details is loaded"):null,r.a.createElement("ul",{className:"inline"},r.a.createElement("li",null,r.a.createElement(I,{to:"/container/run/".concat(this.getId())},"Create a Container")),r.a.createElement("li",null,r.a.createElement("a",{href:"void",className:"text-danger",onClick:this.imageCommand("rm")},"Delete Image")),r.a.createElement("li",null,r.a.createElement("a",{href:"void",className:"text-danger",onClick:this.imageCommand("force-rm")},"Force Delete Image")),r.a.createElement("li",null,r.a.createElement("a",{key:"full-link",href:"void",onClick:this.toggleShowFullDetails.bind(this)},a?"Hide Raw Details":"Show Raw Details"))),a?null:r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Author"),r.a.createElement("td",null,e.Author)),r.a.createElement("tr",null,r.a.createElement("td",null,"Architecture"),r.a.createElement("td",null,e.Architecture)),r.a.createElement("tr",null,r.a.createElement("td",null,"OS"),r.a.createElement("td",null,e.Os)),r.a.createElement("tr",null,r.a.createElement("td",null,"Size"),r.a.createElement("td",null,e.Size>0?r.a.createElement("ul",{className:"no-bullets"},r.a.createElement("li",null,(e.Size/1e6).toFixed(2)," MB"),r.a.createElement("li",null,(e.Size/1e9).toFixed(2)," GB")):null)),r.a.createElement("tr",null,r.a.createElement("td",null,"Tags"),r.a.createElement("td",null,e.RepoTags&&e.RepoTags.length?r.a.createElement("ul",{className:"no-bullets"},e.RepoTags.map((function(e,t){return r.a.createElement("li",{key:"tag-".concat(t)},e)}))):"None")),r.a.createElement("tr",null,r.a.createElement("td",null,"Exposed Ports"),r.a.createElement("td",null,e.Config&&e.Config.ExposedPorts?r.a.createElement("ul",{className:"no-bullets"},Object.keys(e.Config.ExposedPorts).map((function(e,t){return r.a.createElement("li",{key:"port-".concat(e)},e.replace(/(\d+).*/,"$1"))}))):"None")),r.a.createElement("tr",null,r.a.createElement("td",null,"Environment Variables"),r.a.createElement("td",null,e.Config&&e.Config.Env?r.a.createElement("ul",{className:"no-bullets"},e.Config.Env.map((function(e,t){return e.match(/^PATH/)?null:r.a.createElement("li",{key:"port-".concat(e)},e.replace(/(\d+).*/,"$1"))}))):"None")),r.a.createElement("tr",null,r.a.createElement("td",null,"Labels"),r.a.createElement("td",null,e.Config&&e.Config.Labels?r.a.createElement("ul",{className:"no-bullets"},Object.keys(e.Config.Labels).map((function(t,a){return r.a.createElement("li",{key:"label-".concat(t)},r.a.createElement("em",null,t),' : "',e.Config.Labels[t],'"')}))):"None")))),!0===a?[r.a.createElement("pre",{key:"details-dump"},JSON.stringify(e,null,2))]:null)}}]),t}(r.a.Component))),T=N(function(e){function t(e){var a;Object(s.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e));var n=Object(p.a)(a);return k("socketOpen",!1),a.socket=new WebSocket("ws://localhost:8086"),a.socket.onopen=function(){k("socketOpen",!0)},a.socket.onclose=function(){k("socketOpen",!1)},a.socket.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return}if(t&&"build-image"===t.type){if(t&&(t.data||t.error)){var a=w.a.get(n.props,"args.output")||[],l=t.data||t.error;l.match(/^\(/)&&a.length&&a[a.length-1].match(/^\(/)?a[a-1]=l:a.push(l),k("output",a)}t&&!0===t.finished&&k("buildStarted",!1),setTimeout((function(){n.stdout&&(n.stdout.scrollTop=n.stdout.scrollHeight)}),100)}},a.stdout=null,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleFormSubmit",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args,a=t.path,n=t.name,l=t.socketOpen;a&&l?(this.socket.send(JSON.stringify({type:"build-image",name:n,path:a})),k("buildStarted",!0)):l?a||v("Please enter a path first.","error"):v("Socket is not connected.  Please refresh the page.","error")}},{key:"render",value:function(){var e=w.a.get(this.props,"args.socketOpen")||!1,t=w.a.get(this.props,"args.output"),a=w.a.get(this.props,"args.buildStarted")||!1,n=w.a.get(this.props,"args.path")||"",l=w.a.get(this.props,"args.name")||"",o=this;return r.a.createElement("div",{className:"Image-create"},r.a.createElement("h1",null,"Create an Image"),r.a.createElement("p",null,"This page can be used to build an image from a Dockerfile"),r.a.createElement("p",null,r.a.createElement("span",{className:"toggler danger".concat(!0===e?" checked":"")},"Connection Open"),r.a.createElement("br",null),r.a.createElement("em",null,"This page uses WebSockets to stream the output of the build process to this page.  If the indicator above is red, there is no connection."),r.a.createElement("br",null),a?r.a.createElement("span",{className:"toggler danger".concat(!0===a?" checked":"")},"Build Started"):null),r.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this)},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"flex-col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Name")," ",r.a.createElement("em",null,"(optional)"),r.a.createElement("br",null),"Please enter name to easily identify this image"),r.a.createElement("input",{type:"text",onChange:function(e){k("name",e.target.value)},value:l})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"flex-col"},r.a.createElement("p",null,r.a.createElement("strong",null,"Build Directory"),r.a.createElement("br",null),"Please enter the full path of the ",r.a.createElement("strong",null,"directory")," where your Dockerfile is located"),r.a.createElement("input",{type:"text",onChange:function(e){k("path",e.target.value)},value:n})))),r.a.createElement("p",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{type:"submit"},"Create Image")))),t?[r.a.createElement("p",{key:"blank"}),r.a.createElement("pre",{className:"console",key:"console",ref:function(e){o.stdout=e}},t.join(""))]:null)}}]),t}(r.a.Component)),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).mounted=!1,a.timer=null,a.stdout=null,a.props.setSocketKey&&a.props.setSocketKey("container-create-directory-backup"),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getId",value:function(){return this.props.args.id}},{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.getId(),t="container-".concat(e);this.props.addApiWatchId(t),this.props.addApiWatchId("run-command"),b(t,"container/inspect/".concat(e));var a=this;this.timer=setInterval((function(){if(!0!==a.props[t].isLoading)return a.props[t].error?(clearInterval(a.timer),void(a.timer=null)):void b(t,"container/inspect/".concat(e))}),1e3)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&clearInterval(this.timer),this.timer=null}},{key:"toggleShowFullDetails",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=!0!==this.props.args.isShowFull;k("isShowFull",t)}},{key:"containerCommand",value:function(e){var t=this,a=this;return function(n){if(n.preventDefault(),"create-dir-backup"==e){var l=window.prompt("Please enter the full path to the container's folder.","/app");if(l){var r=window.prompt("Please enter a name for the volume.");t.props.sendMessage({sourceDirectory:l,containerId:t.getId(),volumeName:r})}}else b("run-command","container/".concat(a.getId(),"/perform/").concat(e),{method:"post"})}}},{key:"render",value:function(){var e=this.props["container-".concat(this.getId())]||{},t=this.props.args.isShowFull||!1,a=w.a.get(this.props,"args.socketOpen");Array.isArray(e)&&(e=e[0]);var n=e.State?e.State.Status:null,l=w.a.get(this.props,"args.output");return r.a.createElement("div",{className:"Image"},r.a.createElement("h1",null,"Container ",this.props.args.id),r.a.createElement("p",null,"This page show the details and available actions for a Container"),r.a.createElement("span",{className:"toggler danger".concat(!0===a?" checked":"")},"Connection Open"),r.a.createElement("br",null),r.a.createElement("h2",null,"Details"),r.a.createElement("ul",{className:"inline"},"exited"===n?[r.a.createElement("li",{key:"start"},r.a.createElement("a",{href:"void",onClick:this.containerCommand("start")},"Start")),r.a.createElement("li",{key:"remove"},r.a.createElement("a",{href:"void",className:"text-danger",onClick:this.containerCommand("rm")},"Remove"))]:null,"running"===n?[r.a.createElement("li",{key:"stop"},r.a.createElement("a",{href:"void",onClick:this.containerCommand("stop")},"Stop")),r.a.createElement("li",{key:"pause"},r.a.createElement("a",{href:"void",onClick:this.containerCommand("pause")},"Pause")),r.a.createElement("li",{key:"restart"},r.a.createElement("a",{href:"void",onClick:this.containerCommand("restart")},"Restart")),r.a.createElement("li",{key:"create-dir-backup"},r.a.createElement("a",{href:"void",onClick:this.containerCommand("create-dir-backup")},"Create Volume from Container Directory"))]:null,"paused"===n?r.a.createElement("li",null,r.a.createElement("a",{href:"void",onClick:this.containerCommand("unpause")},"Unpause")):null,r.a.createElement("li",null,r.a.createElement("a",{key:"full-link",href:"void",onClick:this.toggleShowFullDetails.bind(this)},t?"Hide Raw Details":"Show Raw Details"))),t?null:r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Value"))),r.a.createElement("tbody",null,"running"===n?r.a.createElement("tr",null,r.a.createElement("td",null,"Started At"),r.a.createElement("td",null,e.State.StartedAt)):null,e.State?r.a.createElement("tr",null,r.a.createElement("td",null,"State"),r.a.createElement("td",null,r.a.createElement("ul",null,["Status","Running","Paused","Restarting","Dead"].map((function(t){return r.a.createElement("li",{key:t},r.a.createElement("strong",null,t)," : ",""+e.State[t])}))))):null,e.Config&&e.Config.Image?r.a.createElement("tr",null,r.a.createElement("td",null,"Image"),r.a.createElement("td",null,r.a.createElement(I,{to:"/image/".concat(e.Config.Image)},e.Config.Image))):null)),!0===t?[r.a.createElement("pre",{key:"details-dump"},JSON.stringify(e,null,2))]:null,l?[r.a.createElement("p",{key:"blank"}),r.a.createElement("pre",{className:"console",key:"console",ref:this.props.stdoutRef},l.join(""))]:null)}}]),t}(r.a.Component),P=(n=N(x),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).type=null,a.stdout=null;var n=Object(p.a)(a);return k("socketOpen",!1),a.socket=new WebSocket("ws://localhost:8086"),a.socket.onopen=function(){k("socketOpen",!0)},a.socket.onclose=function(){k("socketOpen",!1)},a.socket.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return}if(t&&t.type===n.type){if(t&&(t.data||t.error)){var a=w.a.get(n.props,"args.output")||[],l=t.data||t.error;l.match(/^\(/)&&a.length&&a[a.length-1].match(/^\(/)?a[a-1]=l:a.push(l),k("output",a)}t&&!0===t.finished&&k("backupStarted",!1),setTimeout((function(){n.stdout&&(n.stdout.scrollTop=n.stdout.scrollHeight)}),100)}},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"sendMessage",value:function(e){var t,a=w.a.get(this.props,"args.socketOpen");(t="object"===typeof e?Array.isArray(e)||e.type?JSON.stringify(e):JSON.stringify(Object.assign({},{type:this.type},e)):""+e)&&a&&this.socket.send(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(n,Object.assign({stdoutRef:function(t){t&&(e.stdout=t)},sendMessage:this.sendMessage.bind(this),setSocketKey:function(t){e.type=t}},this.props))}}]),t}(r.a.Component)),M=(a(20),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).mounted=!1,a.timer=null,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getType",value:function(){var e=this.props.args||{};return e=e.type||"all"}},{key:"componentDidMount",value:function(){var e=this.getType();b("containers","containers/show/".concat(e)),this.mounted=!0;var t=this;this.timer=setInterval((function(){t.mounted?b("containers","containers/show/".concat(t.getType())):clearInterval(t.timer)}),3e3)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&clearInterval(this.timer),this.timer=null}},{key:"componentDidUpdate",value:function(e){var t=this.getType();e.args.type!==t&&b("containers","containers/show/".concat(t))}},{key:"render",value:function(){var e=this.props.args||{},t=this.props.containers||[];t.output&&t.output.length&&(t=t.output);var a=t.length?t[0]:null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Containers"},r.a.createElement("h1",null,"Containers"),r.a.createElement("div",{className:"Containers-options"},r.a.createElement(I,{to:"/containers/show/".concat("all"===this.getType()?"running":"all"),className:"toggler".concat("all"===e.type?" checked":"")},"Show All")),"all"===e.type?r.a.createElement("p",null,"This page is showing all containers."):r.a.createElement("p",null,"This page is showing only the running containers."),a?r.a.createElement("table",{className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(a).map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,t.map((function(e,t){var a=0,n=0;return Object.keys(e).forEach((function(t,l){a++,e[t]||n++})),a===n?null:r.a.createElement("tr",{key:"row-".concat(t)},Object.keys(e).map((function(t,a){var n=e[t];return"IMAGE"===t?n=r.a.createElement(I,{to:"/image/".concat(n),className:"no-style"},n):"CONTAINER ID"===t?n=r.a.createElement(I,{to:"/container/".concat(n),className:"no-style"},n):"PORTS"===t&&n.length&&(n=r.a.createElement("ul",null,n.split(/,/).map((function(e,t){return r.a.createElement("li",{key:"line-".concat(t)},e)})))),r.a.createElement("td",{key:"row-".concat(a)},n)})))})))):null))}}]),t}(r.a.Component)),R=N(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={flag:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e="image-".concat(this.props.args.imageId);this.props.addApiWatchId("container_run"),this.props.addApiWatchId(e),this.props[e]||b(e,"image/inspect/".concat(this.props.args.imageId)),b("volumes","volumes")}},{key:"handleForm",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args||{},a=[],n=[],l=[],r={flagRm:"--rm",flagTty:"-t"};Object.keys(t).forEach((function(e){if(r.hasOwnProperty(e)){var t=r[e].split(/\s/);a.push({key:t[0],value:t[1]||""})}})),t.name&&t.name.length&&a.push({key:"--name",value:t.name}),t.mounts&&t.mounts.length&&t.mounts.forEach((function(e){e.local&&e.remote&&n.push(e)})),t.volumes&&t.volumes.length&&t.volumes.forEach((function(e){e.volumeId&&e.remote&&l.push(e)})),b("container_run","container/run/".concat(this.props.args.imageId),{method:"post",body:JSON.stringify({options:a,mounts:n,volumes:l,additionalArgs:t.additionalArgs||"",ports:t.ports})})}},{key:"addBountMount",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args.mounts||[];t.push({local:"",remote:""}),k("mounts",t)}},{key:"addVolume",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args.volumes||[];t.push({volumeId:"",remote:""}),k("volumes",t)}},{key:"inputListener",value:function(e){var t=this,a=this;return function(n){switch(e){case"flagRm":k("flagRm",!a.props.args.flagRm),a.setState({flag:!a.state.flag});break;case"flagTty":k("flagTty",!0!==a.props.args.flagTty);break;default:var l,r,o,c;if(e.match(/port_/)){var s=t.props.args.ports||{};s[e.replace(/port_/,"")]=n.target.value,k("ports",s)}else if(l=e.match(/(mounts|volumes)-(\d+)-(volumeId|local|remote)/)){c=l[1],r=l[2];var i=l[3];(o=(o=a.props.args[c]||[]).slice())[r]&&(o[r][i]=n.target.value),k(c,o)}else(l=e.match(/remove-(volumes|mounts)-(\d+)/))?(n.preventDefault(),c=l[1],r=l[2],(o=(w.a.get(a.props,"args.".concat(c))||[]).slice()).splice(r,1),k(c,o)):k(e,n.target.value)}}}},{key:"render",value:function(){var e=this,t="image-".concat(this.props.args.imageId),a=this.props[t]||{},n=this.props.args,l=n.ports||{},o=n.additionalArgs||"",c=n.mounts||[],s=n.volumes||[],i=w.a.get(this.props,"volumes.output")||[];Array.isArray(a)&&(a=a[0]);var u=this;return r.a.createElement("div",{className:"Container-run"},r.a.createElement("h1",null,"Start a Container"),r.a.createElement("p",null,"From this page you can start a new container using the selected image.  Please customize the details below to set different options on the container."),r.a.createElement("form",{onSubmit:this.handleForm.bind(this)},r.a.createElement("p",null,r.a.createElement("strong",null,"Name")," ",r.a.createElement("em",null,"(optional)"),r.a.createElement("br",null),r.a.createElement("em",null,"Gives the container a name so you can easily run commands on the container.")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"flex-col"},r.a.createElement("input",{value:n.name||"",onChange:this.inputListener("name")})))),r.a.createElement("p",null,r.a.createElement("strong",null,"Flags")),r.a.createElement("div",{className:"flex-col"},r.a.createElement("span",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:!!n.flagRm,onChange:this.inputListener("flagRm"),checked:!!n.flagRm})," Don't Persist"),"\xa0- ",r.a.createElement("em",null,"When the container is stopped, it is automatically removed, and can't be restarted.")),r.a.createElement("span",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",value:!!n.flagTty,onChange:this.inputListener("flagTty"),checked:!!n.flagTty})," Prevent Exit \xa0- ",r.a.createElement("em",null,"Containers exit if a script isn't set to run at start, this flag prevents the container from exiting")))),r.a.createElement("p",null,r.a.createElement("strong",null,"Port Mapping")," ",r.a.createElement("em",null,"(optional)"),r.a.createElement("br",null),r.a.createElement("em",null,"If left empty, that port will not be exposed to localhost")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"flex-row flex-justify-between"},r.a.createElement("span",null,"Local Port"),r.a.createElement("span",null),r.a.createElement("span",null,"Container Port")),a.Config&&a.Config.ExposedPorts?Object.keys(a.Config.ExposedPorts).map((function(e){return e=e.replace(/(\d+).*/,"$1"),r.a.createElement("div",{key:"port-".concat(e),className:"flex-row flex-justify-between"},r.a.createElement("div",null,r.a.createElement("input",{onChange:u.inputListener("port_".concat(e)),value:l[e]||""})),r.a.createElement("span",null,"=>"),r.a.createElement("div",null,r.a.createElement("input",{readOnly:!0,value:e})))})):"No Exposed Ports")),r.a.createElement("p",null,r.a.createElement("strong",null,"Volume Binding Mapping")," ",r.a.createElement("em",null,"(optional)"),r.a.createElement("br",null),r.a.createElement("em",null,"Binds a local directory to a directory in the container.  Please use full paths")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},c.map((function(t,a){return r.a.createElement("div",{key:"vol-".concat(a),className:"flex-row flex-justify-between"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"local",value:t.local,onChange:u.inputListener("mounts-".concat(a,"-local"))})),r.a.createElement("span",null,"=>"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"container",value:t.remote,onChange:u.inputListener("mounts-".concat(a,"-remote"))})," \xa0",r.a.createElement("a",{href:"void",onClick:e.inputListener("remove-mounts-".concat(a)),className:"no-style text-danger"},"- Delete")))})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("a",{href:"void",onClick:this.addBountMount.bind(this)},"+ Add a Local Mount"))),r.a.createElement("p",null,r.a.createElement("strong",null,"Volume Mapping")," ",r.a.createElement("em",null,"(optional)"),r.a.createElement("br",null),r.a.createElement("em",null,"Binds a docker volume to a directory in the container.  Please use full paths")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},s.map((function(t,a){return r.a.createElement("div",{key:"vol-".concat(a),className:"flex-row flex-justify-between"},r.a.createElement("div",null,r.a.createElement("div",{className:"flex-col"},r.a.createElement("select",{value:t.volumeId||"",onChange:u.inputListener("volumes-".concat(a,"-volumeId"))},r.a.createElement("option",null,"Select a Volume"),i.map((function(e,t){return r.a.createElement("option",{key:e["VOLUME NAME"]},e["VOLUME NAME"])}))))),r.a.createElement("span",null,"=>"),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"container",value:t.remote,onChange:u.inputListener("volumes-".concat(a,"-remote"))})," \xa0",r.a.createElement("a",{href:"void",onClick:e.inputListener("remove-volumes-".concat(a)),className:"no-style text-danger"},"- Delete")))})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("a",{href:"void",onClick:this.addVolume.bind(this)},"+ Add a Volume"))),r.a.createElement("p",null,r.a.createElement("strong",null,"Additional Arguments"),r.a.createElement("br",null),r.a.createElement("em",null,"Enter any other options/arguments to the command.")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"flex-col"},r.a.createElement("input",{placeholder:"docker run arguments",value:o,onChange:u.inputListener("additionalArgs")})))),r.a.createElement("p",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{type:"submit"},"Start Container")))))}}]),t}(r.a.Component)),V=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 - Page Not Found"),r.a.createElement("p",null,"Return to the ",r.a.createElement(I,{to:"/"},"Home page"),"."))},L=function(e){return r.a.createElement("div",{className:"Home"},r.a.createElement("h1",null,"Docker GUI"),r.a.createElement("p",null,"This is a simple interface for managing your local Docker images, containers, and volumes (",r.a.createElement("em",null,"coming soon"),")"))},W=(a(21),function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(u.a)(this,Object(m.a)(t).call(this,e)),g(Object(p.a)(a)),a.originalPopstateListener=window.onpopstate,a.state=O(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleHistoryEvent",value:function(e){e&&e.preventDefault&&e.preventDefault(),f(O())}},{key:"componentDidMount",value:function(){window.onpopstate=this.handleHistoryEvent}},{key:"componentWillUnmount",value:function(){window.onpopstate=this.originalPopstateListener}},{key:"route",value:function(e){var t=null;switch(e){case"containers":t=r.a.createElement(M,this.state);break;case"images":t=r.a.createElement(D,this.state);break;case"image-create":t=r.a.createElement(T,this.state);break;case"image":t=r.a.createElement(A,this.state);break;case"container-run":t=r.a.createElement(R,this.state);break;case"container":t=r.a.createElement(P,this.state);break;case"volume":t=r.a.createElement(j,this.state);break;case"volumes":t=r.a.createElement(S,this.state);break;case"home":t=r.a.createElement(L,null);break;default:t=r.a.createElement(V,null)}return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("ul",{className:"App-nav"},r.a.createElement("li",null,r.a.createElement(I,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(I,{to:"/containers/show/running"},"Containers")),r.a.createElement("li",null,r.a.createElement(I,{to:"/images"},"Images")),r.a.createElement("li",null,r.a.createElement(I,{to:"/volumes"},"Volumes"))),r.a.createElement("p",null,r.a.createElement("a",{style:{color:"white",textDecoration:"none"},href:"https://github.com/chrisonbass/docker-gui"},"@chrisonbass"))),this.state.message&&(""+this.state.message).length?r.a.createElement("div",{className:"App-msg-".concat("success"===this.state.messageType?"success":"error")},r.a.createElement("a",{href:"void",onClick:y,className:"close"},"x"),r.a.createElement("pre",null,this.state.message)):null,r.a.createElement("div",{className:"App-body"},this.route(this.state.view)))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.6816040c.chunk.js.map