(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(11),o=a.n(r),c=(a(17),a(2)),s=a(3),i=a(6),u=a(4),m=a(7),p=a(5),d=a(8),h=a(1),g=a.n(h),E=null,v=function(e){E=e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E.setState(e)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";"string"===typeof e&&e.length?E.setState({message:e,messageType:t}):"string"!==typeof e?console.error("setErrorMessage only accepts strings.  A '".concat(typeof e,"' was provided")):console.error("Trying to call setErrorMessage with an empty string")},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.preventDefault&&e.preventDefault(),E.setState({message:null,messageType:"success"})},k=function(e,t){var a=Object.assign({},E.state,{args:Object.assign({},E.state.args,Object(d.a)({},e,t))});E.setState(a)},O=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=E.state[e]||{};E.setState(Object(d.a)({},e,Object.assign({},n,{isLoading:!0}))),fetch("http://localhost:8085/"+t,Object.assign({},{method:"GET"},a)).then((function(e){return e.json()})).then((function(t){Array.isArray(t)&&1===t.length&&(t=t[0]),E.setState(Object(d.a)({},e,t))})).catch((function(t){E.setState(Object(d.a)({},e,{error:t}))}))},C=function(e){e&&e.preventDefault&&e.preventDefault();var t=Object.assign({},E.state.args);t.hasOwnProperty("socketOpen")&&delete t.socketOpen,t=JSON.stringify(t);var a=new Blob([t],{type:"json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,"args.json");else{var n=document.createElement("a"),l=URL.createObjectURL(a);n.href=l,n.download="args.json",document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(l)}),0)}},N=function(e){var t=g.a.get(e,"target.files[0]");if(t){var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(t){try{var a=JSON.parse(t.target.result),n=Object.assign({},E.state);n.args=Object.assign({},n.args,a),n.isLoadArgs=!1,f(n)}catch(e){console.error(e),f({isLoadArgs:!1})}},a.onerror=function(e){console.error(e),f({isLoadArgs:!1})}}},w=function(){var e={view:"unknown",isLoadArgs:!1,args:{}},t=window.location.pathname,a=!1;return[{r:/^\/$/,v:"home"},{r:/^\/image\/create$/,v:"image-create"},{r:/\/image\/(.*)/,v:"image",m:function(e){return{id:e[1]}}},{r:/\/images/,v:"images"},{r:/\/containers\/show\/(.*)/,v:"containers",m:function(e){return{type:e[1]}}},{r:/\/container\/run\/(.*)/,v:"container-run",m:function(e){return{imageId:e[1]}}},{r:/\/container\/(.*)/,v:"container",m:function(e){return{id:e[1]}}},{r:/\/volumes\/?$/,v:"volumes"},{r:/\/volume\/create$/,v:"volume-create"},{r:/\/volume\/(.*)/,v:"volume",m:function(e){return{id:e[1]}}}].forEach((function(n){if(!0!==a){var l=n.r.exec(t);l&&(n.v&&(e.view=n.v),e.args=n.m?n.m(l):{},a=!0)}})),e},j=function(e){return function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).apiId=[],t.repeating=[],t.timer=null,t.mounted=!1,t}return Object(p.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.mounted=!0,this.repeating&&(this.timer=setInterval(this.timerCallback.bind(this),1500),this.timerCallback())}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.apiId){var a=[],n="success",l=e.message||null;if(this.apiId.forEach((function(e){var l=t.props[e];if(l)if(l.error)a.push(l.error),n="error";else if(l.results){var r="";l.command&&(r+="Successful Result\n",r+="Command:\n ".concat(l.command),r+="\n\n"),r+="Ouput:\n".concat(l.results),a.push(r)}})),a&&a.length){var r=a.join("\n\n");l!==r&&b(r,n)}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&(clearInterval(this.timer),this.timer=null),this.repeating.concat(this.apiId).forEach((function(e){var t,a=e;e&&e.id&&(a=e.id),t=a,E&&E.state.hasOwnProperty(t)&&(delete E.state[t],E.setState(E.state))}))}},{key:"timerCallback",value:function(e){this.mounted?this.repeating.forEach((function(e){O(e.id,e.endpoint,e.params)})):this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"render",value:function(){var t=this,a=function(e){t.apiId.indexOf(e)<0&&t.apiId.push(e)};return l.a.createElement(e,Object.assign({addRepeatingApi:function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0!==t.mounted){var l=t.repeating.find((function(t){return t.id===e}));l||t.repeating.push({id:e,endpoint:a,params:n,timer:null})}else console.warn("`addRepeatingApi` must be called before `withApiWatch` is mounted")},addApiWatchId:a,setApiWatchId:a},this.props))}}]),a}(l.a.Component)},A=j(function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));var n=Object(m.a)(a);return k("socketOpen",!1),a.socket=new WebSocket("ws://localhost:8086"),a.socket.onopen=function(){k("socketOpen",!0)},a.socket.onclose=function(){k("socketOpen",!1)},a.socket.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return}if(t&&"volume-create-backup"===t.type){if(t&&(t.data||t.error)){var a=g.a.get(n.props,"args.output")||[],l=t.data||t.error;l.match(/^\(/)&&a.length&&a[a.length-1].match(/^\(/)?a[a-1]=l:a.push(l),k("output",a)}t&&!0===t.finished&&k("backupStarted",!1),setTimeout((function(){n.stdout&&(n.stdout.scrollTop=n.stdout.scrollHeight)}),100)}},a.stdout=null,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.addApiWatchId("volume-delete"),this.props.addRepeatingApi("volume-info","volume/"+this.getId())}},{key:"getId",value:function(){return this.props.args.id}},{key:"handleBackupClick",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.getId(),a=this.props.args.socketOpen;t&&a?(this.socket.send(JSON.stringify({type:"volume-create-backup",name:t})),k("backupStarted",!0)):a?t||b("Please enter a path first.","error"):b("Socket is not connected.  Please refresh the page.","error")}},{key:"handleDeleteClick",value:function(e){e&&e.preventDefault&&e.preventDefault(),window.confirm("Are you sure you want to delete this image?")&&O("volume-delete","volume/"+this.getId(),{method:"DELETE"})}},{key:"parseValue",value:function(e){if(Array.isArray(e))return e.join(", ");switch(typeof e){case"string":case"number":return e;case"object":return this.objectToString(e);default:return e}}},{key:"objectToString",value:function(e){var t=this;return l.a.createElement("ul",null,Object.keys(e).map((function(a){return l.a.createElement("li",{key:"entry-".concat(a)},l.a.createElement("strong",null,a)," => ",t.parseValue(e[a]))})))}},{key:"render",value:function(){var e=this,t=g.a.get(this.props,"volume-info.results.basic"),a=g.a.get(this.props,"volume-info.results.meta"),n=g.a.get(this.props,"args.socketOpen")||!1,r=g.a.get(this.props,"args.output"),o=g.a.get(this.props,"args.backupStarted")||!1,c=this,s=[];return l.a.createElement("div",{className:"Volume"},l.a.createElement("h1",null,"Volume ",this.getId()),l.a.createElement("p",null,"This page container information about a specific Volume, and provides simple actions to manage the Volume."),l.a.createElement("p",null,l.a.createElement("span",{className:"toggler danger".concat(!0===n?" checked":"")},"Connection Open"),l.a.createElement("br",null),l.a.createElement("em",null,"This page uses WebSockets to stream the output of the build process to this page.  If the indicator above is red, there is no connection."),l.a.createElement("br",null),o?l.a.createElement("span",{className:"toggler danger".concat(!0===o?" checked":"")},"Backup Started"):null),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"void",className:"text-danger",onClick:this.handleDeleteClick.bind(this)},"Delete Volume")),o?null:l.a.createElement("li",null,l.a.createElement("a",{href:"void",onClick:this.handleBackupClick.bind(this)},"Create Backup"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Value"))),l.a.createElement("tbody",null,t?Object.keys(t).map((function(a,n){return s.push(a.toLowerCase()),l.a.createElement("tr",{key:"volume-basic-".concat(a,"-").concat(n)},l.a.createElement("td",null,a),l.a.createElement("td",null,e.parseValue(t[a])))})):null,a?Object.keys(a).map((function(t,n){return s.indexOf(t.toLowerCase())>=0?null:l.a.createElement("tr",{key:"volume-meta-".concat(t,"-").concat(n)},l.a.createElement("td",null,t),l.a.createElement("td",null,e.parseValue(a[t])))})):null)))),r?[l.a.createElement("p",{key:"blank"}),l.a.createElement("pre",{className:"console",key:"console",ref:function(e){c.stdout=e}},r.join(""))]:null)}}]),t}(l.a.Component)),I=function(e){return l.a.createElement("a",{href:e.to,onClick:function(t){t&&t.preventDefault&&t.preventDefault(),window.history.pushState({},e.title||"Page Change",e.to),"function"===typeof e.onClick&&e.onClick(),f(w())},className:e.className||""},e.children)},S=j(function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.addRepeatingApi("volumes","volumes"),this.props.addApiWatchId("volume-create")}},{key:"handleNewVolume",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=window.prompt("Please enter a name for the Volume.");t&&O("volume-create","volume/create",{method:"post",body:JSON.stringify({name:t})})}},{key:"render",value:function(){var e=g.a.get(this.props,"volumes.output")||[];return l.a.createElement("div",{className:"Volumes"},l.a.createElement("h1",null,"Volumes"),l.a.createElement("p",null,"This page lists the available volumes."),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{href:"void",onClick:this.handleNewVolume.bind(this)},"Create new Volume"))),e&&e.length?l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,Object.keys(e[0]).map((function(e,t){return l.a.createElement("th",{key:"col-".concat(e)},e)})))),l.a.createElement("tbody",null,e.map((function(e,t){return l.a.createElement("tr",{key:"vol-".concat(t)},Object.keys(e).map((function(t,a){var n=e[t];return"VOLUME NAME"===t&&(n=l.a.createElement(I,{to:"/volume/".concat(e[t])},e[t])),l.a.createElement("td",{key:"vol-key-".concat(t)},n)})))})))):null)}}]),t}(l.a.Component)),D=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){O("images","images")}},{key:"render",value:function(){var e=this.props.images||{};return l.a.createElement("div",{className:"Images"},l.a.createElement("h1",null,"Images"),l.a.createElement("p",null,"This page lists the available images"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(I,{to:"/image/create"},"Create new Image"))),e&&e.output?l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Image ID"),l.a.createElement("th",null,"Repository"),l.a.createElement("th",null,"Size"),l.a.createElement("th",null,"Created"))),l.a.createElement("tbody",null,e.output.map((function(e,t){return e["IMAGE ID"]?l.a.createElement("tr",{key:e["IMAGE ID"]},l.a.createElement("td",null,l.a.createElement(I,{to:"/image/".concat(e["IMAGE ID"])},e["IMAGE ID"])),l.a.createElement("td",null,e.REPOSITORY),l.a.createElement("td",null,e.SIZE),l.a.createElement("td",null,e.CREATED)):null})))):null)}}]),t}(l.a.Component),x=(a(10),j(function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getId",value:function(){return this.props.args.id}},{key:"componentDidMount",value:function(){this.props.addRepeatingApi("image-".concat(this.getId()),"image/inspect/".concat(this.getId())),this.props.addApiWatchId("image-".concat(this.getId())),this.props.addApiWatchId("run-img-command")}},{key:"toggleShowFullDetails",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=!0!==this.props.args.isShowFull;k("isShowFull",t)}},{key:"imageCommand",value:function(e){var t=this;return function(a){a.preventDefault();var n={method:"post"};"force-rm"===e&&(e="rm",n.body=JSON.stringify({options:["-f"]})),O("run-img-command","image/".concat(t.getId(),"/perform/").concat(e),n)}}},{key:"render",value:function(){var e=this.props["image-".concat(this.getId())]||{},t=g.a.get(this.props,"image-".concat(this.getId(),".isLoading"))||!1,a=this.props.args.isShowFull||!1;return Array.isArray(e)&&(e=e[0]),l.a.createElement("div",{className:"Image"},l.a.createElement("h1",null,"Image ",this.props.args.id),l.a.createElement("p",null,"This page show the details and available actions for an Image"),l.a.createElement("h2",null,"Details"),t&&!e.Size?l.a.createElement("p",null,"Please wait while the image details is loaded"):null,l.a.createElement("ul",{className:"inline"},l.a.createElement("li",null,l.a.createElement(I,{to:"/container/run/".concat(this.getId())},"Create a Container")),l.a.createElement("li",null,l.a.createElement("a",{href:"void",className:"text-danger",onClick:this.imageCommand("rm")},"Delete Image")),l.a.createElement("li",null,l.a.createElement("a",{href:"void",className:"text-danger",onClick:this.imageCommand("force-rm")},"Force Delete Image")),l.a.createElement("li",null,l.a.createElement("a",{key:"full-link",href:"void",onClick:this.toggleShowFullDetails.bind(this)},a?"Hide Raw Details":"Show Raw Details"))),a?null:l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Value"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Author"),l.a.createElement("td",null,e.Author)),l.a.createElement("tr",null,l.a.createElement("td",null,"Architecture"),l.a.createElement("td",null,e.Architecture)),l.a.createElement("tr",null,l.a.createElement("td",null,"OS"),l.a.createElement("td",null,e.Os)),l.a.createElement("tr",null,l.a.createElement("td",null,"Size"),l.a.createElement("td",null,e.Size>0?l.a.createElement("ul",{className:"no-bullets"},l.a.createElement("li",null,(e.Size/1e6).toFixed(2)," MB"),l.a.createElement("li",null,(e.Size/1e9).toFixed(2)," GB")):null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Tags"),l.a.createElement("td",null,e.RepoTags&&e.RepoTags.length?l.a.createElement("ul",{className:"no-bullets"},e.RepoTags.map((function(e,t){return l.a.createElement("li",{key:"tag-".concat(t)},e)}))):"None")),l.a.createElement("tr",null,l.a.createElement("td",null,"Exposed Ports"),l.a.createElement("td",null,e.Config&&e.Config.ExposedPorts?l.a.createElement("ul",{className:"no-bullets"},Object.keys(e.Config.ExposedPorts).map((function(e,t){return l.a.createElement("li",{key:"port-".concat(e)},e.replace(/(\d+).*/,"$1"))}))):"None")),l.a.createElement("tr",null,l.a.createElement("td",null,"Environment Variables"),l.a.createElement("td",null,e.Config&&e.Config.Env?l.a.createElement("ul",{className:"no-bullets"},e.Config.Env.map((function(e,t){return e.match(/^PATH/)?null:l.a.createElement("li",{key:"port-".concat(e)},e.replace(/(\d+).*/,"$1"))}))):"None")),l.a.createElement("tr",null,l.a.createElement("td",null,"Labels"),l.a.createElement("td",null,e.Config&&e.Config.Labels?l.a.createElement("ul",{className:"no-bullets"},Object.keys(e.Config.Labels).map((function(t,a){return l.a.createElement("li",{key:"label-".concat(t)},l.a.createElement("em",null,t),' : "',e.Config.Labels[t],'"')}))):"None")))),!0===a?[l.a.createElement("pre",{key:"details-dump"},JSON.stringify(e,null,2))]:null)}}]),t}(l.a.Component))),L=function(e){return function(t){function a(e){var t;Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).type=null,t.stdout=null;var n=Object(m.a)(t);return k("socketOpen",!1),t.socket=new WebSocket("ws://localhost:8086"),t.socket.onopen=function(){k("socketOpen",!0)},t.socket.onclose=function(){k("socketOpen",!1)},t.socket.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return}if(t&&t.type===n.type){if(t&&(t.data||t.error)){var a=g.a.get(n.props,"args.output")||[],l=t.data||t.error;l.match(/^\(/)&&a.length&&a[a.length-1].match(/^\(/)?a[a-1]=l:a.push(l),k("output",a)}t&&!0===t.finished&&k("backupStarted",!1),setTimeout((function(){n.stdout&&(n.stdout.scrollTop=n.stdout.scrollHeight)}),100)}},t}return Object(p.a)(a,t),Object(s.a)(a,[{key:"sendMessage",value:function(e){var t,a=g.a.get(this.props,"args.socketOpen");(t="object"===typeof e?Array.isArray(e)||e.type?JSON.stringify(e):JSON.stringify(Object.assign({},{type:this.type},e)):""+e)&&a&&this.socket.send(t)}},{key:"render",value:function(){var t=this;return l.a.createElement(e,Object.assign({stdoutRef:function(e){e&&(t.stdout=e)},sendMessage:this.sendMessage.bind(this),setSocketKey:function(e){t.type=e}},this.props))}}]),a}(l.a.Component)},T=j(L(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).props.setSocketKey&&a.props.setSocketKey("build-image"),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleFormSubmit",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args,a=t.path,n=t.name,l=t.buildArgs,r=t.socketOpen;a&&r?this.props.sendMessage({name:n,path:a,buildArgs:l}):r?a||b("Please enter a path first.","error"):b("Socket is not connected.  Please refresh the page.","error")}},{key:"handleAddArg",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=(g.a.get(this.props,"args.buildArgs")||[]).slice();t.push({name:"",value:""}),k("buildArgs",t)}},{key:"getArgChangeListener",value:function(e,t){var a=this;return function(n){var l=(g.a.get(a.props,"args.buildArgs")||[]).slice();if("delete"===t&&n&&n.preventDefault)return n.preventDefault(),l.splice(e,1),void k("buildArgs",l);if(l[e]){var r=Object.assign({},l[e],Object(d.a)({},t,n.target.value));l.splice(e,1,r),k("buildArgs",l)}}}},{key:"render",value:function(){var e=this,t=g.a.get(this.props,"args.socketOpen")||!1,a=g.a.get(this.props,"args.output"),n=g.a.get(this.props,"args.path")||"",r=g.a.get(this.props,"args.buildArgs"),o=g.a.get(this.props,"args.name")||"";return l.a.createElement("div",{className:"Image-create"},l.a.createElement("h1",null,"Create an Image"),l.a.createElement("p",null,"This page can be used to build an image from a Dockerfile"),l.a.createElement("p",null,l.a.createElement("span",{className:"toggler danger".concat(!0===t?" checked":"")},"Connection Open"),l.a.createElement("br",null),l.a.createElement("em",null,"This page uses WebSockets to stream the output of the build process to this page.  If the indicator above is red, there is no connection."),l.a.createElement("br",null)),l.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this)},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-col"},l.a.createElement("p",null,l.a.createElement("strong",null,"Name")," ",l.a.createElement("em",null,"(optional)"),l.a.createElement("br",null),"Please enter name to easily identify this image"),l.a.createElement("input",{type:"text",onChange:function(e){k("name",e.target.value)},value:o})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-col"},l.a.createElement("p",null,l.a.createElement("strong",null,"Build Directory"),l.a.createElement("br",null),"Please enter the full path of the ",l.a.createElement("strong",null,"directory")," where your Dockerfile is located"),l.a.createElement("input",{type:"text",onChange:function(e){k("path",e.target.value)},value:n})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-col"},l.a.createElement("p",null,l.a.createElement("strong",null,"Build Args"),l.a.createElement("br",null),"Arguments placed here will be replace any ARG/ENV values"),r&&r.length?r.map((function(t,a){return l.a.createElement("div",{key:"arg-".concat(a),className:"flex-fill"},l.a.createElement("div",{className:"flex-col",style:{marginRight:"10px"}},l.a.createElement("strong",null,"Name"),l.a.createElement("input",{value:t.name,onChange:e.getArgChangeListener(a,"name")})),l.a.createElement("div",{className:"flex-col",style:{marginRight:"10px"}},l.a.createElement("strong",null,"Value"),l.a.createElement("input",{value:t.value,onChange:e.getArgChangeListener(a,"value")})),l.a.createElement("a",{href:"void",className:"text-danger",onClick:e.getArgChangeListener(a,"delete")},"- Delete"))})):null,l.a.createElement("a",{href:"void",onClick:this.handleAddArg.bind(this)},"+ add Arg")))),l.a.createElement("p",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"submit"},"Create Image")))),a?[l.a.createElement("p",{key:"blank"}),l.a.createElement("pre",{className:"console",key:"console",ref:this.props.stdoutRef},a.join(""))]:null)}}]),t}(l.a.Component))),R=L(j(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).mounted=!1,a.timer=null,a.stdout=null,a.props.setSocketKey&&a.props.setSocketKey("container-create-directory-backup"),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getId",value:function(){return this.props.args.id}},{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.getId(),t="container-".concat(e);this.props.addApiWatchId(t),this.props.addApiWatchId("run-command"),O(t,"container/inspect/".concat(e));var a=this;this.timer=setInterval((function(){if(!0!==a.props[t].isLoading)return a.props[t].error?(clearInterval(a.timer),void(a.timer=null)):void O(t,"container/inspect/".concat(e))}),1e3)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&clearInterval(this.timer),this.timer=null}},{key:"toggleShowFullDetails",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=!0!==this.props.args.isShowFull;k("isShowFull",t)}},{key:"containerCommand",value:function(e){var t=this,a=this;return function(n){if(n.preventDefault(),"create-dir-backup"==e){var l=window.prompt("Please enter the full path to the container's folder.","/app");if(l){var r=window.prompt("Please enter a name for the volume.");t.props.sendMessage({sourceDirectory:l,containerId:t.getId(),volumeName:r})}}else O("run-command","container/".concat(a.getId(),"/perform/").concat(e),{method:"post"})}}},{key:"render",value:function(){var e=this.props["container-".concat(this.getId())]||{},t=this.props.args.isShowFull||!1,a=g.a.get(this.props,"args.socketOpen");Array.isArray(e)&&(e=e[0]);var n=e.State?e.State.Status:null,r=g.a.get(this.props,"args.output");return l.a.createElement("div",{className:"Image"},l.a.createElement("h1",null,"Container ",this.props.args.id),l.a.createElement("p",null,"This page show the details and available actions for a Container"),l.a.createElement("span",{className:"toggler danger".concat(!0===a?" checked":"")},"Connection Open"),l.a.createElement("br",null),l.a.createElement("h2",null,"Details"),l.a.createElement("ul",{className:"inline"},"exited"===n?[l.a.createElement("li",{key:"start"},l.a.createElement("a",{href:"void",onClick:this.containerCommand("start")},"Start")),l.a.createElement("li",{key:"remove"},l.a.createElement("a",{href:"void",className:"text-danger",onClick:this.containerCommand("rm")},"Remove"))]:null,"running"===n?[l.a.createElement("li",{key:"stop"},l.a.createElement("a",{href:"void",onClick:this.containerCommand("stop")},"Stop")),l.a.createElement("li",{key:"pause"},l.a.createElement("a",{href:"void",onClick:this.containerCommand("pause")},"Pause")),l.a.createElement("li",{key:"restart"},l.a.createElement("a",{href:"void",onClick:this.containerCommand("restart")},"Restart")),l.a.createElement("li",{key:"create-dir-backup"},l.a.createElement("a",{href:"void",onClick:this.containerCommand("create-dir-backup")},"Create Volume from Container Directory"))]:null,"paused"===n?l.a.createElement("li",null,l.a.createElement("a",{href:"void",onClick:this.containerCommand("unpause")},"Unpause")):null,l.a.createElement("li",null,l.a.createElement("a",{key:"full-link",href:"void",onClick:this.toggleShowFullDetails.bind(this)},t?"Hide Raw Details":"Show Raw Details"))),t?null:l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Value"))),l.a.createElement("tbody",null,"running"===n?l.a.createElement("tr",null,l.a.createElement("td",null,"Started At"),l.a.createElement("td",null,e.State.StartedAt)):null,e.State?l.a.createElement("tr",null,l.a.createElement("td",null,"State"),l.a.createElement("td",null,l.a.createElement("ul",null,["Status","Running","Paused","Restarting","Dead"].map((function(t){return l.a.createElement("li",{key:t},l.a.createElement("strong",null,t)," : ",""+e.State[t])}))))):null,e.Config&&e.Config.Image?l.a.createElement("tr",null,l.a.createElement("td",null,"Image"),l.a.createElement("td",null,l.a.createElement(I,{to:"/image/".concat(e.Config.Image)},e.Config.Image))):null)),!0===t?[l.a.createElement("pre",{key:"details-dump"},JSON.stringify(e,null,2))]:null,r?[l.a.createElement("p",{key:"blank"}),l.a.createElement("pre",{className:"console",key:"console",ref:this.props.stdoutRef},r.join(""))]:null)}}]),t}(l.a.Component))),P=(a(20),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).mounted=!1,a.timer=null,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getType",value:function(){var e=this.props.args||{};return e=e.type||"all"}},{key:"componentDidMount",value:function(){var e=this.getType();O("containers","containers/show/".concat(e)),this.mounted=!0;var t=this;this.timer=setInterval((function(){t.mounted?O("containers","containers/show/".concat(t.getType())):clearInterval(t.timer)}),3e3)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.timer&&clearInterval(this.timer),this.timer=null}},{key:"componentDidUpdate",value:function(e){var t=this.getType();e.args.type!==t&&O("containers","containers/show/".concat(t))}},{key:"render",value:function(){var e=this.props.args||{},t=this.props.containers||[];t.output&&t.output.length&&(t=t.output);var a=t.length?t[0]:null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"Containers"},l.a.createElement("h1",null,"Containers"),l.a.createElement("div",{className:"Containers-options"},l.a.createElement(I,{to:"/containers/show/".concat("all"===this.getType()?"running":"all"),className:"toggler".concat("all"===e.type?" checked":"")},"Show All")),"all"===e.type?l.a.createElement("p",null,"This page is showing all containers."):l.a.createElement("p",null,"This page is showing only the running containers."),a?l.a.createElement("table",{className:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,Object.keys(a).map((function(e){return l.a.createElement("th",{key:e},e)})))),l.a.createElement("tbody",null,t.map((function(e,t){var a=0,n=0;return Object.keys(e).forEach((function(t,l){a++,e[t]||n++})),a===n?null:l.a.createElement("tr",{key:"row-".concat(t)},Object.keys(e).map((function(t,a){var n=e[t];return"IMAGE"===t?n=l.a.createElement(I,{to:"/image/".concat(n),className:"no-style"},n):"CONTAINER ID"===t?n=l.a.createElement(I,{to:"/container/".concat(n),className:"no-style"},n):"PORTS"===t&&n.length&&(n=l.a.createElement("ul",null,n.split(/,/).map((function(e,t){return l.a.createElement("li",{key:"line-".concat(t)},e)})))),l.a.createElement("td",{key:"row-".concat(a)},n)})))})))):null))}}]),t}(l.a.Component)),M=j(function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={flag:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e="image-".concat(this.props.args.imageId);this.props.addApiWatchId("container_run"),this.props.addApiWatchId(e),this.props[e]&&O(e,"image/inspect/".concat(this.props.args.imageId)),O("volumes","volumes")}},{key:"handleForm",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args||{},a=[],n=[],l=[],r={flagRm:"--rm",flagTty:"-t"};Object.keys(t).forEach((function(e){if(r.hasOwnProperty(e)){var t=r[e].split(/\s/);a.push({key:t[0],value:t[1]||""})}})),t.name&&t.name.length&&a.push({key:"--name",value:t.name}),t.mounts&&t.mounts.length&&t.mounts.forEach((function(e){e.local&&e.remote&&n.push(e)})),t.volumes&&t.volumes.length&&t.volumes.forEach((function(e){e.volumeId&&e.remote&&l.push(e)})),O("container_run","container/run/".concat(this.props.args.imageId),{method:"post",body:JSON.stringify({options:a,mounts:n,volumes:l,additionalArgs:t.additionalArgs||"",ports:t.ports})})}},{key:"addBountMount",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args.mounts||[];t.push({local:"",remote:""}),k("mounts",t)}},{key:"addVolume",value:function(e){e&&e.preventDefault&&e.preventDefault();var t=this.props.args.volumes||[];t.push({volumeId:"",remote:""}),k("volumes",t)}},{key:"inputListener",value:function(e){var t=this,a=this;return function(n){switch(e){case"flagRm":k("flagRm",!a.props.args.flagRm),a.setState({flag:!a.state.flag});break;case"flagTty":k("flagTty",!0!==a.props.args.flagTty);break;default:var l,r,o,c;if(e.match(/port_/)){var s=t.props.args.ports||{};s[e.replace(/port_/,"")]=n.target.value,k("ports",s)}else if(l=e.match(/(mounts|volumes)-(\d+)-(volumeId|local|remote)/)){c=l[1],r=l[2];var i=l[3];(o=(o=a.props.args[c]||[]).slice())[r]&&(o[r][i]=n.target.value),k(c,o)}else(l=e.match(/remove-(volumes|mounts)-(\d+)/))?(n.preventDefault(),c=l[1],r=l[2],(o=(g.a.get(a.props,"args.".concat(c))||[]).slice()).splice(r,1),k(c,o)):k(e,n.target.value)}}}},{key:"render",value:function(){var e=this,t="image-".concat(this.props.args.imageId),a=this.props[t]||{},n=this.props.args,r=n.ports||{},o=n.additionalArgs||"",c=n.mounts||[],s=n.volumes||[],i=g.a.get(this.props,"volumes.output")||[];Array.isArray(a)&&(a=a[0]);var u=this;return l.a.createElement("div",{className:"Container-run"},l.a.createElement("h1",null,"Start a Container"),l.a.createElement("p",null,"From this page you can start a new container using the selected image.  Please customize the details below to set different options on the container."),l.a.createElement("form",{onSubmit:this.handleForm.bind(this)},l.a.createElement("p",null,l.a.createElement("strong",null,"Name")," ",l.a.createElement("em",null,"(optional)"),l.a.createElement("br",null),l.a.createElement("em",null,"Gives the container a name so you can easily run commands on the container.")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-col"},l.a.createElement("input",{value:n.name||"",onChange:this.inputListener("name")})))),l.a.createElement("p",null,l.a.createElement("strong",null,"Flags")),l.a.createElement("div",{className:"flex-col"},l.a.createElement("span",null,l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",value:!!n.flagRm,onChange:this.inputListener("flagRm"),checked:!!n.flagRm})," Don't Persist"),"\xa0- ",l.a.createElement("em",null,"When the container is stopped, it is automatically removed, and can't be restarted.")),l.a.createElement("span",null,l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",value:!!n.flagTty,onChange:this.inputListener("flagTty"),checked:!!n.flagTty})," Prevent Exit \xa0- ",l.a.createElement("em",null,"Containers exit if a script isn't set to run at start, this flag prevents the container from exiting")))),l.a.createElement("p",null,l.a.createElement("strong",null,"Port Mapping")," ",l.a.createElement("em",null,"(optional)"),l.a.createElement("br",null),l.a.createElement("em",null,"If left empty, that port will not be exposed to localhost")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-row flex-justify-between"},l.a.createElement("span",null,"Local Port"),l.a.createElement("span",null),l.a.createElement("span",null,"Container Port")),a.Config&&a.Config.ExposedPorts?Object.keys(a.Config.ExposedPorts).map((function(e){return e=e.replace(/(\d+).*/,"$1"),l.a.createElement("div",{key:"port-".concat(e),className:"flex-row flex-justify-between"},l.a.createElement("div",null,l.a.createElement("input",{onChange:u.inputListener("port_".concat(e)),value:r[e]||""})),l.a.createElement("span",null,"=>"),l.a.createElement("div",null,l.a.createElement("input",{readOnly:!0,value:e})))})):"No Exposed Ports")),l.a.createElement("p",null,l.a.createElement("strong",null,"Volume Binding Mapping")," ",l.a.createElement("em",null,"(optional)"),l.a.createElement("br",null),l.a.createElement("em",null,"Binds a local directory to a directory in the container.  Please use full paths")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},c.map((function(t,a){return l.a.createElement("div",{key:"vol-".concat(a),className:"flex-row flex-justify-between"},l.a.createElement("div",null,l.a.createElement("input",{placeholder:"local",value:t.local,onChange:u.inputListener("mounts-".concat(a,"-local"))})),l.a.createElement("span",null,"=>"),l.a.createElement("div",null,l.a.createElement("input",{placeholder:"container",value:t.remote,onChange:u.inputListener("mounts-".concat(a,"-remote"))})," \xa0",l.a.createElement("a",{href:"void",onClick:e.inputListener("remove-mounts-".concat(a)),className:"no-style text-danger"},"- Delete")))})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("a",{href:"void",onClick:this.addBountMount.bind(this)},"+ Add a Local Mount"))),l.a.createElement("p",null,l.a.createElement("strong",null,"Volume Mapping")," ",l.a.createElement("em",null,"(optional)"),l.a.createElement("br",null),l.a.createElement("em",null,"Binds a docker volume to a directory in the container.  Please use full paths")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},s.map((function(t,a){return l.a.createElement("div",{key:"vol-".concat(a),className:"flex-row flex-justify-between"},l.a.createElement("div",null,l.a.createElement("div",{className:"flex-col"},l.a.createElement("select",{value:t.volumeId||"",onChange:u.inputListener("volumes-".concat(a,"-volumeId"))},l.a.createElement("option",null,"Select a Volume"),i.map((function(e,t){return l.a.createElement("option",{key:e["VOLUME NAME"]},e["VOLUME NAME"])}))))),l.a.createElement("span",null,"=>"),l.a.createElement("div",null,l.a.createElement("input",{placeholder:"container",value:t.remote,onChange:u.inputListener("volumes-".concat(a,"-remote"))})," \xa0",l.a.createElement("a",{href:"void",onClick:e.inputListener("remove-volumes-".concat(a)),className:"no-style text-danger"},"- Delete")))})))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("a",{href:"void",onClick:this.addVolume.bind(this)},"+ Add a Volume"))),l.a.createElement("p",null,l.a.createElement("strong",null,"Additional Arguments"),l.a.createElement("br",null),l.a.createElement("em",null,"Enter any other options/arguments to the command.")),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("div",{className:"flex-col"},l.a.createElement("input",{placeholder:"docker run arguments",value:o,onChange:u.inputListener("additionalArgs")})))),l.a.createElement("p",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6"},l.a.createElement("button",{type:"submit"},"Start Container")))))}}]),t}(l.a.Component)),V=function(e){return l.a.createElement("div",null,l.a.createElement("h1",null,"404 - Page Not Found"),l.a.createElement("p",null,"Return to the ",l.a.createElement(I,{to:"/"},"Home page"),"."))},F=function(e){return l.a.createElement("div",{className:"Home"},l.a.createElement("h1",null,"Docker GUI"),l.a.createElement("p",null,"This is a simple interface for managing your local Docker images, containers, and volumes (",l.a.createElement("em",null,"coming soon"),")"))},W=(a(21),function(e){function t(e){var a;return Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e)),v(Object(m.a)(a)),a.originalPopstateListener=window.onpopstate,a.state=w(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleHistoryEvent",value:function(e){e&&e.preventDefault&&e.preventDefault(),f(w())}},{key:"componentDidMount",value:function(){window.onpopstate=this.handleHistoryEvent}},{key:"componentWillUnmount",value:function(){window.onpopstate=this.originalPopstateListener}},{key:"route",value:function(e){var t=null;switch(e){case"containers":t=l.a.createElement(P,this.state);break;case"images":t=l.a.createElement(D,this.state);break;case"image-create":t=l.a.createElement(T,this.state);break;case"image":t=l.a.createElement(x,this.state);break;case"container-run":t=l.a.createElement(M,this.state);break;case"container":t=l.a.createElement(R,this.state);break;case"volume":t=l.a.createElement(A,this.state);break;case"volumes":t=l.a.createElement(S,this.state);break;case"home":t=l.a.createElement(F,null);break;default:t=l.a.createElement(V,null)}return t}},{key:"handleLoadSwitch",value:function(e){e&&e.preventDefault&&e.preventDefault(),f({isLoadArgs:!this.state.isLoadArgs})}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("ul",{className:"App-nav"},l.a.createElement("li",null,l.a.createElement(I,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(I,{to:"/containers/show/running"},"Containers")),l.a.createElement("li",null,l.a.createElement(I,{to:"/images"},"Images")),l.a.createElement("li",null,l.a.createElement(I,{to:"/volumes"},"Volumes"))),l.a.createElement("p",null,l.a.createElement("a",{style:{color:"white",textDecoration:"none"},href:"https://github.com/chrisonbass/docker-gui"},"@chrisonbass"))),this.state.message&&(""+this.state.message).length?l.a.createElement("div",{className:"App-msg-".concat("success"===this.state.messageType?"success":"error")},l.a.createElement("a",{href:"void",onClick:y,className:"close"},"x"),l.a.createElement("pre",null,this.state.message)):null,l.a.createElement("div",{className:"App-body"},this.route(this.state.view)),l.a.createElement("p",null),l.a.createElement("div",{className:"App-footer"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6",style:{textAlign:"left"}},!0===this.state.isLoadArgs?l.a.createElement("div",null,l.a.createElement("strong",null,"Please select the Args json file to load"),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.handleLoadSwitch.bind(this)},"Show Current Args"),l.a.createElement("br",null),l.a.createElement("input",{type:"file",onChange:N})):l.a.createElement("div",null,l.a.createElement("strong",null,"Current Page Args"),l.a.createElement("br",null),l.a.createElement("button",{onClick:C},"Save Args"),l.a.createElement("span",null,"\xa0"),l.a.createElement("button",{onClick:this.handleLoadSwitch.bind(this)},"Load Args"),l.a.createElement("br",null),l.a.createElement("pre",null,function(){var e=Object.assign({},g.a.get(E.state,"args")||{});return e.hasOwnProperty("socketOpen")&&delete e.socketOpen,JSON.stringify(e,null,2)}()))))))}}]),t}(l.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[12,1,2]]]);
//# sourceMappingURL=main.483ac930.chunk.js.map